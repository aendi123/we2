<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accessible Start Rating</title>
  <style>
    #star_rating {
      display: flex;
    }

    .visuallyhidden {
      border: 0;
      clip: rect(0 0 0 0);
      height: 1px;
      margin: -1px;
      overflow: hidden;
      padding: 0;
      position: absolute;
      width: 1px;
    }

    #star_rating label::before {
      content: "★";
      /*line-height: 1em;*/
      font-size: 1.1em;
      fill: currentColor;
      stroke: currentColor;
    }

    #star_rating label:first-of-type::before {
      content: "❌";
      font-size: 0.6em;
      vertical-align: -0.2em;
    }


    #star_rating label, #star_rating output {
      display: block;
      font-size: 2em;
      height: 1.2em;
      color: #036;
      cursor: pointer;
      /* Transparent border-bottom avoids jumping
         when a colored border is applied
         on :hover/:focus */
      border-bottom: 2px solid transparent;
    }

    #star_rating output {
      padding: 10px;
    }

    #star_rating input:checked ~ label {
      color: #999;
    }

    #star_rating input:checked + label {
      color: #036;
      border-bottom-color: #036;
    }

    #star_rating input:focus + label {
      border-bottom-style: dotted;
    }

    #star_rating:hover input + label {
      color: #036;
    }

    #star_rating input:hover ~ label,
    #star_rating input:focus ~ label,
    #star_rating input[id="star0"] + label {
      color: #999;
    }

    #star_rating input:hover + label,
    #star_rating input:focus + label {
      color: #036;
    }

    #star_rating input[id="star0"]:checked + label {
      color: #ff2d21;
    }

    #star_rating [type="submit"] {
      float: none;
    }
  </style>
</head>
<body>
<h1>Accessible Star Rating</h1>
<p>Adapted from <a href="https://www.w3.org/WAI/tutorials/forms/custom-controls/">W3C Accessible Tutorials</a></p>

<p>
  Here the input (radio-button) is hidden, but the label (i.e. the :before of the label) is visible and accepts
  the clicks when the pointing device is used.
</p>

<form action="#" id="star_rating">
  <input value="0" id="star0" checked type="radio" name="rating" class="visuallyhidden">
  <label for="star0">
    <span class="visuallyhidden">0 Stars</span>
  </label>

  <input value="1" id="star1" type="radio" name="rating" class="visuallyhidden">
  <label for="star1">
    <!--captures pointe clicks-->
    <span class="visuallyhidden">1 Star</span>
  </label>

  <input value="2" id="star2" type="radio" name="rating" class="visuallyhidden">
  <label for="star2">
    <span class="visuallyhidden">2 Stars</span>
  </label>

  <input value="3" id="star3" type="radio" name="rating" class="visuallyhidden">
  <label for="star3">
    <span class="visuallyhidden">3 Stars</span>
  </label>

  <input value="4" id="star4" type="radio" name="rating" class="visuallyhidden">
  <label for="star4">
    <span class="visuallyhidden">4 Stars</span>
  </label>

  <input value="5" id="star5" type="radio" name="rating" class="visuallyhidden">
  <label for="star5">
    <span class="visuallyhidden">5 Stars</span>
  </label>

  <button type="submit" class="btn-small visuallyhidden focusable">Submit rating</button>

  <output>0 Stars</output>
</form>
<script>
  const output = document.querySelector('#star_rating output');
  const starRatingForm = document.querySelector('#star_rating');

  // listen to bubbling change event of the input elements
  starRatingForm.addEventListener("change", function (event) {
    if (event.target.matches('input')) {
      const input = event.target;
      output.value = `${input.value} Stars`;
    }
  });

  // If the form gets submitted, do_something
  const do_something = function (message) {
    // An AJAX request could send the data to the server
    console.log(message);
  };

  starRatingForm.addEventListener('submit', function (event) {
    event.preventDefault();
    event.stopImmediatePropagation();
    do_something("submitted " + document.querySelector('#star_rating :checked ~ label span').textContent);
  });
</script>
</body>
</html>
